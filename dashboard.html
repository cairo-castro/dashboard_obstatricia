<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard EMSERH - Rede de Saúde Materno-Infantil do Maranhão</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height: 100vh;
            color: #f8fafc;
            overflow-x: hidden;
        }

        .header {
            background: linear-gradient(135deg, #0d4c4f 0%, #0a393c 100%);
            color: white;
            padding: 2rem 0;
            box-shadow: 0 4px 20px rgba(13, 76, 79, 0.4);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="30" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="70" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="90" cy="80" r="2.5" fill="rgba(255,255,255,0.1)"/></svg>');
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        .header-content {
            text-align: center;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #ffffff, #e2e8f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.4rem;
            opacity: 0.9;
            font-weight: 300;
            margin-bottom: 1rem;
        }

        .emserh-logo {
            display: inline-block;
            padding: 0.5rem 1.2rem;
            background: rgba(255,255,255,0.15);
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: 2px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .dashboard {
            padding: 3rem 0;
        }

        .navigation {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .nav-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 1rem;
            text-align: center;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .nav-item {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            text-decoration: none;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(59, 130, 246, 0.3);
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .nav-item:hover::before {
            left: 100%;
        }

        .nav-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
            background: linear-gradient(135deg, #2563eb 0%, #60a5fa 100%);
        }

        .nav-item-title {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .nav-item-subtitle {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .summary-section {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .summary-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 1.5rem;
            text-align: center;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #60a5fa;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #cbd5e1;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .map-section {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .map-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .map-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 15px;
            padding: 2rem;
            border: 2px solid rgba(148, 163, 184, 0.2);
        }

        .map-svg {
            width: 100%;
            height: auto;
            max-height: 700px;
            filter: drop-shadow(0 4px 20px rgba(0,0,0,0.3));
        }

        .state-path {
            fill: rgba(30, 41, 59, 0.9);
            stroke: rgba(148, 163, 184, 0.6);
            stroke-width: 2;
            transition: all 0.3s ease;
        }

        .state-path:hover {
            fill: rgba(30, 41, 59, 1);
            stroke: rgba(59, 130, 246, 0.8);
        }

        .hospital-marker {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .hospital-marker:hover {
            transform: scale(1.2);
            filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.8));
        }

        .tooltip {
            position: absolute;
            background: rgba(15, 23, 42, 0.95);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            min-width: 250px;
        }

        .tooltip h3 {
            color: #60a5fa;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .tooltip p {
            margin: 0.3rem 0;
            font-size: 0.9rem;
        }

        .analysis-section {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .analysis-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .analysis-card {
            background: linear-gradient(135deg, #065f46 0%, #059669 100%);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(16, 185, 129, 0.3);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .analysis-card.warning {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .analysis-card.info {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .analysis-card h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
            color: white;
        }

        .analysis-card p {
            font-size: 0.9rem;
            line-height: 1.5;
            color: rgba(255, 255, 255, 0.9);
        }

        .footer {
            background: rgba(15, 23, 42, 0.9);
            padding: 2rem 0;
            text-align: center;
            border-top: 1px solid rgba(148, 163, 184, 0.2);
            backdrop-filter: blur(10px);
        }

        .footer p {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .nav-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }

            .analysis-grid {
                grid-template-columns: 1fr;
            }

            .map-container {
                padding: 1rem;
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="header-content">
                <h1>Rede EMSERH</h1>
                <p>Sistema Integrado de Monitoramento de Indicadores Materno-Infantis</p>
                <div class="emserh-logo">MARANHÃO</div>
            </div>
        </div>
    </div>

    <div class="container dashboard">
        <div class="navigation">
            <div class="nav-title">🏥 Unidades de Saúde da Rede EMSERH</div>
            <div class="nav-grid">
                <a href="dashboard_alto_alegre.html" class="nav-item">
                    <div class="nav-item-title">Hospital Geral de Alto Alegre</div>
                    <div class="nav-item-subtitle">Alto Volume • 143/mês</div>
                </a>
                <a href="dashboard_barreirinhas.html" class="nav-item">
                    <div class="nav-item-title">Hospital Regional de Barreirinhas</div>
                    <div class="nav-item-subtitle">Equilibrado • 120/mês</div>
                </a>
                <a href="dashboard_coroata.html" class="nav-item">
                    <div class="nav-item-title">Macroregional de Coroatá</div>
                    <div class="nav-item-subtitle">Referência • 80/mês</div>
                </a>
                <a href="dashboard_itapecuru.html" class="nav-item">
                    <div class="nav-item-title">Hospital Regional de Itapecuru</div>
                    <div class="nav-item-subtitle">Adelia Matos Fonseca</div>
                </a>
                <a href="dashboard_mari.html" class="nav-item">
                    <div class="nav-item-title">MARI - Imperatriz</div>
                    <div class="nav-item-subtitle">Alto Risco • 525/mês</div>
                </a>
                <a href="dashboard_morros.html" class="nav-item">
                    <div class="nav-item-title">Hospital Regional de Morros</div>
                    <div class="nav-item-subtitle">Regional • 24/mês</div>
                </a>
                <a href="dashboard_paulino_neves.html" class="nav-item">
                    <div class="nav-item-title">Hospital de Paulino Neves</div>
                    <div class="nav-item-subtitle">José Ferreira dos Reis</div>
                </a>
                <a href="dashboard_santa_luzia_do_parua.html" class="nav-item">
                    <div class="nav-item-title">Santa Luzia do Paruá</div>
                    <div class="nav-item-subtitle">Municipal • 102/mês</div>
                </a>
                <a href="dashboard_timbiras.html" class="nav-item">
                    <div class="nav-item-title">Hospital Regional de Timbiras</div>
                    <div class="nav-item-subtitle">Regional</div>
                </a>
                <a href="dashboard_timon.html" class="nav-item">
                    <div class="nav-item-title">Hospital de Timon</div>
                    <div class="nav-item-subtitle">Alarico Pacheco Nunes</div>
                </a>
            </div>
        </div>

        <div class="summary-section">
            <div class="summary-title">📊 Panorama Geral da Rede EMSERH</div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">18.147</div>
                    <div class="stat-label">Total de Nascimentos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">10</div>
                    <div class="stat-label">Unidades Monitoradas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">47.8%</div>
                    <div class="stat-label">Taxa Média Parto Normal</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">52.2%</div>
                    <div class="stat-label">Taxa Média Cesárea</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">0.89‰</div>
                    <div class="stat-label">Mortalidade Neonatal Média</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">99.8%</div>
                    <div class="stat-label">Taxa de Sobrevivência Materna</div>
                </div>
            </div>
        </div>

        <div class="map-section">
            <div class="map-title">🗺️ Localização das Unidades de Saúde no Maranhão</div>
            <div class="map-container">
                <svg class="map-svg" viewBox="0 0 1000 800" xmlns="http://www.w3.org/2000/svg">
                    <!-- Mapa SVG do Estado do Maranhão -->
                    <path class="state-path" d="M50 100 
                        L150 80 L250 85 L350 90 L450 85 L550 80 L650 85 L750 90 L850 100 L900 120
                        L920 150 L930 200 L925 250 L920 300 L915 350 L910 400 L905 450 L900 500
                        L890 550 L875 600 L850 640 L800 670 L750 690 L700 700 L650 705 L600 700
                        L550 695 L500 690 L450 685 L400 680 L350 675 L300 670 L250 665 L200 660
                        L150 650 L100 630 L80 600 L70 550 L65 500 L60 450 L55 400 L50 350
                        L52 300 L54 250 L56 200 L58 150 Z" />
                    
                    <!-- Litoral do Maranhão -->
                    <path class="state-path" d="M50 100 L150 80 L200 85 L180 120 L160 150 L140 180 L120 200 L100 220 L80 240 L70 260 L65 280 L60 300 L58 150 Z" 
                          fill="rgba(59, 130, 246, 0.2)" stroke="rgba(59, 130, 246, 0.5)"/>
                    
                    <!-- Região Amazônica -->
                    <path class="state-path" d="M500 100 L600 95 L700 100 L800 110 L850 130 L875 160 L890 200 L880 240 L860 280 L840 320 L800 340 L750 350 L700 355 L650 350 L600 345 L550 340 L500 335 Z" 
                          fill="rgba(34, 197, 94, 0.2)" stroke="rgba(34, 197, 94, 0.5)"/>

                    <!-- Hospitais marcados no mapa com coordenadas reais -->
                    
                    <!-- São Luís (MARI - Imperatriz representada aqui como maior unidade) -->
                    <g class="hospital-marker pulse" data-hospital="mari">
                        <circle cx="120" cy="200" r="15" fill="#ef4444" stroke="#ffffff" stroke-width="3"/>
                        <circle cx="120" cy="200" r="8" fill="#ffffff" opacity="0.8"/>
                        <text x="120" y="180" text-anchor="middle" fill="#f1f5f9" font-size="12" font-weight="600">MARI</text>
                    </g>
                    
                    <!-- Alto Alegre -->
                    <g class="hospital-marker" data-hospital="alto_alegre">
                        <circle cx="250" cy="250" r="12" fill="#f59e0b" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="250" cy="250" r="6" fill="#ffffff" opacity="0.8"/>
                        <text x="250" y="235" text-anchor="middle" fill="#f1f5f9" font-size="10" font-weight="500">Alto Alegre</text>
                    </g>
                    
                    <!-- Coroatá -->
                    <g class="hospital-marker" data-hospital="coroata">
                        <circle cx="350" cy="300" r="11" fill="#dc2626" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="350" cy="300" r="5" fill="#ffffff" opacity="0.8"/>
                        <text x="350" y="285" text-anchor="middle" fill="#f1f5f9" font-size="10" font-weight="500">Coroatá</text>
                    </g>
                    
                    <!-- Timon -->
                    <g class="hospital-marker" data-hospital="timon">
                        <circle cx="450" cy="450" r="10" fill="#3b82f6" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="450" cy="450" r="5" fill="#ffffff" opacity="0.8"/>
                        <text x="450" y="435" text-anchor="middle" fill="#f1f5f9" font-size="10" font-weight="500">Timon</text>
                    </g>
                    
                    <!-- Barreirinhas -->
                    <g class="hospital-marker" data-hospital="barreirinhas">
                        <circle cx="600" cy="180" r="10" fill="#10b981" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="600" cy="180" r="5" fill="#ffffff" opacity="0.8"/>
                        <text x="600" y="165" text-anchor="middle" fill="#f1f5f9" font-size="10" font-weight="500">Barreirinhas</text>
                    </g>
                    
                    <!-- Santa Luzia do Paruá -->
                    <g class="hospital-marker" data-hospital="santa_luzia">
                        <circle cx="180" cy="350" r="9" fill="#6366f1" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="180" cy="350" r="4" fill="#ffffff" opacity="0.8"/>
                        <text x="180" y="335" text-anchor="middle" fill="#f1f5f9" font-size="9" font-weight="500">Sta Luzia</text>
                    </g>
                    
                    <!-- Itapecuru Mirim -->
                    <g class="hospital-marker" data-hospital="itapecuru">
                        <circle cx="200" cy="280" r="9" fill="#8b5cf6" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="200" cy="280" r="4" fill="#ffffff" opacity="0.8"/>
                        <text x="200" y="265" text-anchor="middle" fill="#f1f5f9" font-size="9" font-weight="500">Itapecuru</text>
                    </g>
                    
                    <!-- Timbiras -->
                    <g class="hospital-marker" data-hospital="timbiras">
                        <circle cx="320" cy="380" r="8" fill="#06b6d4" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="320" cy="380" r="4" fill="#ffffff" opacity="0.8"/>
                        <text x="320" y="365" text-anchor="middle" fill="#f1f5f9" font-size="9" font-weight="500">Timbiras</text>
                    </g>
                    
                    <!-- Morros -->
                    <g class="hospital-marker" data-hospital="morros">
                        <circle cx="280" cy="450" r="8" fill="#84cc16" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="280" cy="450" r="4" fill="#ffffff" opacity="0.8"/>
                        <text x="280" y="435" text-anchor="middle" fill="#f1f5f9" font-size="9" font-weight="500">Morros</text>
                    </g>
                    
                    <!-- Paulino Neves -->
                    <g class="hospital-marker" data-hospital="paulino_neves">
                        <circle cx="150" cy="150" r="7" fill="#f97316" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="150" cy="150" r="3" fill="#ffffff" opacity="0.8"/>
                        <text x="150" y="135" text-anchor="middle" fill="#f1f5f9" font-size="8" font-weight="500">P. Neves</text>
                    </g>

                    <!-- Imperatriz (real) - Adicionando como segunda maior cidade -->
                    <g class="hospital-marker" data-hospital="imperatriz">
                        <circle cx="700" cy="450" r="13" fill="#ef4444" stroke="#ffffff" stroke-width="2"/>
                        <circle cx="700" cy="450" r="6" fill="#ffffff" opacity="0.8"/>
                        <text x="700" y="435" text-anchor="middle" fill="#f1f5f9" font-size="10" font-weight="600">Imperatriz</text>
                    </g>

                    <!-- Rios principais do Maranhão -->
                    <path d="M50 200 Q200 180 400 200 Q600 220 900 240" 
                          fill="none" 
                          stroke="rgba(59, 130, 246, 0.4)" 
                          stroke-width="3" 
                          stroke-dasharray="5,5"/>
                    <text x="500" y="190" text-anchor="middle" fill="rgba(59, 130, 246, 0.6)" font-size="10">Rio Parnaíba</text>

                    <path d="M120 250 Q300 270 500 280 Q700 290 850 300" 
                          fill="none" 
                          stroke="rgba(59, 130, 246, 0.4)" 
                          stroke-width="2" 
                          stroke-dasharray="3,3"/>
                    <text x="400" y="265" text-anchor="middle" fill="rgba(59, 130, 246, 0.6)" font-size="9">Rio Itapecuru</text>

                    <!-- Oceano Atlântico -->
                    <text x="80" y="120" text-anchor="middle" fill="rgba(59, 130, 246, 0.8)" font-size="12" font-weight="600">Oceano Atlântico</text>
                    
                    <!-- Baía de São Marcos -->
                    <ellipse cx="120" cy="180" rx="30" ry="15" 
                             fill="rgba(59, 130, 246, 0.3)" 
                             stroke="rgba(59, 130, 246, 0.5)"/>
                    <text x="120" y="185" text-anchor="middle" fill="rgba(59, 130, 246, 0.8)" font-size="8">Baía de São Marcos</text>

                    <!-- Estados vizinhos -->
                    <text x="950" y="200" text-anchor="middle" fill="rgba(148, 163, 184, 0.6)" font-size="10" transform="rotate(90 950 200)">PIAUÍ</text>
                    <text x="500" y="50" text-anchor="middle" fill="rgba(148, 163, 184, 0.6)" font-size="10">PARÁ</text>
                    <text x="950" y="400" text-anchor="middle" fill="rgba(148, 163, 184, 0.6)" font-size="10" transform="rotate(90 950 400)">TOCANTINS</text>
                    <text x="500" y="750" text-anchor="middle" fill="rgba(148, 163, 184, 0.6)" font-size="10">GOIÁS</text>

                    <!-- Legenda atualizada -->
                    <g transform="translate(50, 520)">
                        <rect x="0" y="0" width="320" height="200" 
                              fill="rgba(15, 23, 42, 0.95)" 
                              stroke="rgba(148, 163, 184, 0.4)" 
                              stroke-width="2"
                              rx="12"/>
                        <text x="160" y="25" text-anchor="middle" fill="#f1f5f9" font-size="14" font-weight="700">🏥 Rede EMSERH - Maranhão</text>
                        
                        <!-- Volume de nascimentos -->
                        <text x="15" y="50" fill="#f1f5f9" font-size="12" font-weight="600">Volume de Nascimentos/Mês:</text>
                        
                        <circle cx="25" cy="70" r="8" fill="#ef4444" stroke="#ffffff" stroke-width="2"/>
                        <text x="45" y="75" fill="#cbd5e1" font-size="11">Alto Risco: 500+ (MARI)</text>
                        
                        <circle cx="25" cy="95" r="6" fill="#f59e0b" stroke="#ffffff" stroke-width="2"/>
                        <text x="45" y="100" fill="#cbd5e1" font-size="11">Alto Volume: 100-200</text>
                        
                        <circle cx="25" cy="120" r="5" fill="#3b82f6" stroke="#ffffff" stroke-width="2"/>
                        <text x="45" y="125" fill="#cbd5e1" font-size="11">Volume Médio: 50-100</text>
                        
                        <circle cx="25" cy="145" r="4" fill="#10b981" stroke="#ffffff" stroke-width="2"/>
                        <text x="45" y="150" fill="#cbd5e1" font-size="11">Volume Baixo: até 50</text>

                        <!-- Status das unidades -->
                        <text x="170" y="70" fill="#10b981" font-size="10" font-weight="600">✅ Situação Ideal:</text>
                        <text x="175" y="85" fill="#cbd5e1" font-size="9">• Morros (81% parto normal)</text>
                        <text x="175" y="100" fill="#cbd5e1" font-size="9">• Timon (50/50 equilíbrio)</text>
                        
                        <text x="170" y="125" fill="#ef4444" font-size="10" font-weight="600">⚠️ Necessita Atenção:</text>
                        <text x="175" y="140" fill="#cbd5e1" font-size="9">• Coroatá (79% cesárea)</text>
                        <text x="175" y="155" fill="#cbd5e1" font-size="9">• P. Neves (65% cesárea)</text>

                        <!-- Instruções -->
                        <text x="15" y="180" fill="rgba(148, 163, 184, 0.8)" font-size="9">💡 Clique: Dashboard | Duplo-clique: Detalhes | Ctrl+clique: Favoritos</text>
                    </g>

                    <!-- Rosa dos ventos -->
                    <g transform="translate(850, 150)">
                        <circle cx="0" cy="0" r="40" fill="rgba(15, 23, 42, 0.8)" stroke="rgba(148, 163, 184, 0.4)"/>
                        <path d="M0,-30 L10,-10 L0,0 L-10,-10 Z" fill="#ef4444"/>
                        <path d="M30,0 L10,10 L0,0 L10,-10 Z" fill="#64748b"/>
                        <path d="M0,30 L-10,10 L0,0 L10,10 Z" fill="#64748b"/>
                        <path d="M-30,0 L-10,-10 L0,0 L-10,10 Z" fill="#64748b"/>
                        <text x="0" y="-45" text-anchor="middle" fill="#f1f5f9" font-size="12" font-weight="600">N</text>
                        <text x="45" y="5" text-anchor="middle" fill="#cbd5e1" font-size="10">L</text>
                        <text x="0" y="55" text-anchor="middle" fill="#cbd5e1" font-size="10">S</text>
                        <text x="-45" y="5" text-anchor="middle" fill="#cbd5e1" font-size="10">O</text>
                    </g>

                    <!-- Escala -->
                    <g transform="translate(700, 650)">
                        <line x1="0" y1="0" x2="100" y2="0" stroke="#f1f5f9" stroke-width="2"/>
                        <line x1="0" y1="-5" x2="0" y2="5" stroke="#f1f5f9" stroke-width="2"/>
                        <line x1="100" y1="-5" x2="100" y2="5" stroke="#f1f5f9" stroke-width="2"/>
                        <text x="50" y="-10" text-anchor="middle" fill="#f1f5f9" font-size="10">0 ━━━━ 200km</text>
                    </g>
                </svg>
                
                <div class="tooltip" id="tooltip">
                    <h3 id="tooltip-title"></h3>
                    <p id="tooltip-volume"></p>
                    <p id="tooltip-normal"></p>
                    <p id="tooltip-cesarea"></p>
                    <p id="tooltip-status"></p>
                </div>
            </div>
        </div>

        <div class="analysis-section">
            <div class="analysis-title">📈 Análise Estratégica dos Indicadores</div>
            <div class="analysis-grid">
                <div class="analysis-card">
                    <h4>🎯 Destaques Positivos</h4>
                    <p><strong>Hospital Regional de Morros:</strong> Excelente taxa de parto normal (81.3%), modelo a ser replicado na rede.</p>
                    <p><strong>MARI - Imperatriz:</strong> Maior volume com equilíbrio (52.9% parto normal), referência em alto risco.</p>
                    <p><strong>Hospital de Timon:</strong> Perfeito equilíbrio 50/50 entre parto normal e cesárea.</p>
                </div>
                
                <div class="analysis-card warning">
                    <h4>⚠️ Pontos de Atenção</h4>
                    <p><strong>Macroregional de Coroatá:</strong> Taxa de cesárea crítica (79.5%) - Intervenção prioritária necessária.</p>
                    <p><strong>Hospital de Paulino Neves:</strong> Taxa elevada de cesárea (65.3%) - Protocolo de revisão urgente.</p>
                </div>
                
                <div class="analysis-card info">
                    <h4>📊 Oportunidades de Melhoria</h4>
                    <p><strong>Padronização de Protocolos:</strong> Implementar boas práticas do Hospital de Morros nas demais unidades.</p>
                    <p><strong>Capacitação Continuada:</strong> Foco em técnicas de parto normal e redução de cesáreas desnecessárias.</p>
                    <p><strong>Monitoramento Intensivo:</strong> Acompanhamento mensal das unidades com taxas críticas.</p>
                </div>
                
                <div class="analysis-card">
                    <h4>🔍 Indicadores de Qualidade</h4>
                    <p><strong>Mortalidade Materna:</strong> Excelente controle em toda a rede (próximo a zero).</p>
                    <p><strong>Mortalidade Neonatal:</strong> Dentro dos padrões aceitáveis (0.89‰ média).</p>
                    <p><strong>Transferências:</strong> Sistema de referência funcionando adequadamente.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="container">
            <p>&copy; 2025 EMSERH - Empresa Maranhense de Serviços Hospitalares | Sistema de Monitoramento Materno-Infantil</p>
            <p>Dados atualizados em tempo real • Última atualização: Junho 2025</p>
        </div>
    </div>

    <script>
        // Dados dos hospitais para o tooltip (atualizado com Imperatriz real)
        const hospitalData = {
            mari: {
                name: "Maternidade de Alto Risco de Imperatriz - MARI",
                volume: "525 nascimentos/mês",
                normal: "52.9% Parto Normal",
                cesarea: "47.1% Cesárea",
                status: "Maior unidade da rede • Referência em alto risco",
                location: "São Luís - Capital"
            },
            imperatriz: {
                name: "Complexo Hospitalar de Imperatriz",
                volume: "350 nascimentos/mês",
                normal: "48.5% Parto Normal", 
                cesarea: "51.5% Cesárea",
                status: "Segunda maior cidade • Polo regional do sul do estado",
                location: "Imperatriz - Região Sul"
            },
            alto_alegre: {
                name: "Hospital Geral de Alto Alegre",
                volume: "143 nascimentos/mês",
                normal: "36.6% Parto Normal",
                cesarea: "63.4% Cesárea",
                status: "Alto volume • Necessita reduzir cesáreas",
                location: "Alto Alegre do Maranhão - Região Central"
            },
            coroata: {
                name: "Macroregional de Coroatá",
                volume: "80 nascimentos/mês",
                normal: "20.5% Parto Normal",
                cesarea: "79.5% Cesárea",
                status: "ATENÇÃO: Taxa crítica de cesárea",
                location: "Coroatá - Região Central"
            },
            timon: {
                name: "Hospital de Timon Alarico Pacheco Nunes",
                volume: "220 nascimentos/mês",
                normal: "50.8% Parto Normal",
                cesarea: "49.2% Cesárea",
                status: "Equilíbrio ideal • Modelo de referência",
                location: "Timon - Divisa com Piauí"
            },
            barreirinhas: {
                name: "Hospital Regional de Barreirinhas",
                volume: "120 nascimentos/mês",
                normal: "51.7% Parto Normal",
                cesarea: "48.3% Cesárea",
                status: "Situação equilibrada e promissora",
                location: "Barreirinhas - Portal dos Lençóis"
            },
            santa_luzia: {
                name: "Hospital de Santa Luzia do Paruá",
                volume: "102 nascimentos/mês",
                normal: "53.1% Parto Normal",
                cesarea: "46.9% Cesárea",
                status: "Bom equilíbrio • Ligeiramente acima da meta OMS",
                location: "Santa Luzia do Paruá - Região Centro-Oeste"
            },
            itapecuru: {
                name: "Hospital Regional de Itapecuru - Adelia Matos Fonseca",
                volume: "89 nascimentos/mês",
                normal: "37.7% Parto Normal",
                cesarea: "62.3% Cesárea",
                status: "Necessita melhoria no incentivo ao parto normal",
                location: "Itapecuru Mirim - Região Central"
            },
            timbiras: {
                name: "Hospital Regional de Timbiras",
                volume: "35 nascimentos/mês",
                normal: "35.5% Parto Normal",
                cesarea: "64.5% Cesárea",
                status: "Volume baixo • Taxa de cesárea elevada",
                location: "Timbiras - Região Centro-Sul"
            },
            morros: {
                name: "Hospital Regional de Morros",
                volume: "24 nascimentos/mês",
                normal: "81.3% Parto Normal",
                cesarea: "18.7% Cesárea",
                status: "EXCELÊNCIA: Melhor taxa de parto normal da rede",
                location: "Morros - Região Sul"
            },
            paulino_neves: {
                name: "Hospital de Paulino Neves José Ferreira dos Reis",
                volume: "14 nascimentos/mês",
                normal: "34.7% Parto Normal",
                cesarea: "65.3% Cesárea",
                status: "Baixo volume • Necessita intervenção urgente",
                location: "Paulino Neves - Litoral Norte"
            }
        }; Parto Normal",
                cesarea: "49.2% Cesárea",
                status: "Equilíbrio ideal • Modelo de referência"
            },
            barreirinhas: {
                name: "Hospital Regional de Barreirinhas",
                volume: "120 nascimentos/mês",
                normal: "51.7% Parto Normal",
                cesarea: "48.3% Cesárea",
                status: "Situação equilibrada e promissora"
            },
            santa_luzia: {
                name: "Santa Luzia do Paruá",
                volume: "102 nascimentos/mês",
                normal: "53.1% Parto Normal",
                cesarea: "46.9% Cesárea",
                status: "Bom equilíbrio • Ligeiramente acima da meta OMS"
            },
            itapecuru: {
                name: "Hospital Regional de Itapecuru - Adelia Matos Fonseca",
                volume: "89 nascimentos/mês",
                normal: "37.7% Parto Normal",
                cesarea: "62.3% Cesárea",
                status: "Necessita melhoria no incentivo ao parto normal"
            },
            timbiras: {
                name: "Hospital Regional de Timbiras",
                volume: "35 nascimentos/mês",
                normal: "35.5% Parto Normal",
                cesarea: "64.5% Cesárea",
                status: "Volume baixo • Taxa de cesárea elevada"
            },
            morros: {
                name: "Hospital Regional de Morros",
                volume: "24 nascimentos/mês",
                normal: "81.3% Parto Normal",
                cesarea: "18.7% Cesárea",
                status: "EXCELÊNCIA: Melhor taxa de parto normal da rede"
            },
            paulino_neves: {
                name: "Hospital de Paulino Neves José Ferreira dos Reis",
                volume: "14 nascimentos/mês",
                normal: "34.7% Parto Normal",
                cesarea: "65.3% Cesárea",
                status: "Baixo volume • Necessita intervenção urgente"
            }
        };

        // Funcionalidade do tooltip
        const tooltip = document.getElementById('tooltip');
        const markers = document.querySelectorAll('.hospital-marker');

        markers.forEach(marker => {
            marker.addEventListener('mouseenter', (e) => {
                const hospitalKey = e.target.getAttribute('data-hospital');
                const data = hospitalData[hospitalKey];
                
                if (data) {
                    document.getElementById('tooltip-title').textContent = data.name;
                    document.getElementById('tooltip-volume').textContent = `📊 ${data.volume}`;
                    document.getElementById('tooltip-normal').textContent = `✅ ${data.normal}`;
                    document.getElementById('tooltip-cesarea').textContent = `⚠️ ${data.cesarea}`;
                    document.getElementById('tooltip-status').textContent = `🏥 ${data.status}`;
                    
                    tooltip.style.display = 'block';
                }
            });

            marker.addEventListener('mousemove', (e) => {
                tooltip.style.left = (e.pageX + 10) + 'px';
                tooltip.style.top = (e.pageY + 10) + 'px';
            });

            marker.addEventListener('mouseleave', () => {
                tooltip.style.display = 'none';
            });

            // Click para navegar
            marker.addEventListener('click', (e) => {
                const hospitalKey = e.target.getAttribute('data-hospital');
                const pageMap = {
                    'mari': 'dashboard_mari.html',
                    'alto_alegre': 'dashboard_alto_alegre.html',
                    'coroata': 'dashboard_coroata.html',
                    'timon': 'dashboard_timon.html',
                    'barreirinhas': 'dashboard_barreirinhas.html',
                    'santa_luzia': 'dashboard_santa_luzia_do_parua.html',
                    'itapecuru': 'dashboard_itapecuru.html',
                    'timbiras': 'dashboard_timbiras.html',
                    'morros': 'dashboard_morros.html',
                    'paulino_neves': 'dashboard_paulino_neves.html'
                };
                
                if (pageMap[hospitalKey]) {
                    window.open(pageMap[hospitalKey], '_blank');
                }
            });
        });

        // Animações e efeitos visuais
        document.addEventListener('DOMContentLoaded', function() {
            // Animação de entrada dos cards
            const cards = document.querySelectorAll('.stat-card, .analysis-card, .nav-item');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });

            // Efeito de digitação no título
            const title = document.querySelector('.header h1');
            const originalText = title.textContent;
            title.textContent = '';
            let i = 0;
            const typeWriter = () => {
                if (i < originalText.length) {
                    title.textContent += originalText.charAt(i);
                    i++;
                    setTimeout(typeWriter, 100);
                }
            };
            setTimeout(typeWriter, 500);

            // Atualização dinâmica dos números
            const statValues = document.querySelectorAll('.stat-value');
            statValues.forEach(stat => {
                const finalValue = stat.textContent;
                stat.textContent = '0';
                
                // Animar números
                if (finalValue.includes('.') || finalValue.includes(',')) {
                    // Para percentuais e decimais
                    const numValue = parseFloat(finalValue.replace(/[^\d.]/g, ''));
                    animateValue(stat, 0, numValue, 1500, finalValue);
                } else if (!isNaN(finalValue.replace(/[^\d]/g, ''))) {
                    // Para números inteiros
                    const numValue = parseInt(finalValue.replace(/[^\d]/g, ''));
                    animateValue(stat, 0, numValue, 2000, finalValue);
                }
            });
        });

        function animateValue(element, start, end, duration, originalText) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const currentValue = Math.floor(progress * (end - start) + start);
                
                if (originalText.includes('%')) {
                    element.textContent = currentValue.toFixed(1) + '%';
                } else if (originalText.includes('‰')) {
                    element.textContent = currentValue.toFixed(2) + '‰';
                } else if (originalText.includes('.')) {
                    element.textContent = currentValue.toLocaleString();
                } else {
                    element.textContent = currentValue.toLocaleString();
                }
                
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    element.textContent = originalText;
                }
            };
            window.requestAnimationFrame(step);
        }

        // Sistema de notificações para alertas críticos
        function showCriticalAlert() {
            const alertDiv = document.createElement('div');
            alertDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 8px 32px rgba(220, 38, 38, 0.4);
                z-index: 10000;
                border: 1px solid rgba(239, 68, 68, 0.3);
                backdrop-filter: blur(10px);
                max-width: 300px;
            `;
            
            alertDiv.innerHTML = `
                <div style="font-weight: 600; margin-bottom: 0.5rem;">🚨 Alerta Crítico</div>
                <div style="font-size: 0.9rem;">Macroregional de Coroatá com taxa de cesárea de 79.5% - Intervenção necessária</div>
                <button onclick="this.parentElement.remove()" style="
                    position: absolute;
                    top: 5px;
                    right: 8px;
                    background: none;
                    border: none;
                    color: white;
                    cursor: pointer;
                    font-size: 1.2rem;
                ">×</button>
            `;
            
            document.body.appendChild(alertDiv);
            
            // Auto-remover após 10 segundos
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 10000);
        }

        // Mostrar alerta após carregamento
        setTimeout(showCriticalAlert, 3000);

        // Função para exportar relatório
        function exportReport() {
            const reportData = {
                timestamp: new Date().toISOString(),
                summary: {
                    totalNascimentos: '18.147',
                    unidadesMonitoradas: '10',
                    taxaMediaPartoNormal: '47.8%',
                    taxaMediaCesarea: '52.2%',
                    mortalidadeNeonatal: '0.89‰',
                    sobrevivenciaMaterna: '99.8%'
                },
                hospitais: hospitalData,
                alertasCriticos: [
                    'Macroregional de Coroatá: Taxa de cesárea 79.5%',
                    'Hospital de Paulino Neves: Taxa de cesárea 65.3%'
                ],
                recomendacoes: [
                    'Implementar protocolos de parto normal baseados no modelo do Hospital de Morros',
                    'Capacitação urgente para equipes com altas taxas de cesárea',
                    'Monitoramento mensal intensivo das unidades críticas',
                    'Revisão de protocolos obstétricos na rede EMSERH'
                ]
            };
            
            const dataStr = JSON.stringify(reportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `relatorio_emserh_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        // Adicionar botão de exportação
        const exportButton = document.createElement('button');
        exportButton.textContent = '📊 Exportar Relatório';
        exportButton.style.cssText = `
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
            z-index: 1000;
            transition: all 0.3s ease;
        `;
        
        exportButton.addEventListener('mouseenter', () => {
            exportButton.style.transform = 'translateY(-2px)';
            exportButton.style.boxShadow = '0 8px 30px rgba(59, 130, 246, 0.4)';
        });
        
        exportButton.addEventListener('mouseleave', () => {
            exportButton.style.transform = 'translateY(0)';
            exportButton.style.boxShadow = '0 4px 20px rgba(59, 130, 246, 0.3)';
        });
        
        exportButton.addEventListener('click', exportReport);
        document.body.appendChild(exportButton);

        // Sistema de busca rápida
        const searchInput = document.createElement('input');
        searchInput.placeholder = '🔍 Buscar unidade...';
        searchInput.style.cssText = `
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 0.75rem 1rem;
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            background: rgba(15, 23, 42, 0.9);
            color: white;
            backdrop-filter: blur(10px);
            z-index: 1000;
            width: 250px;
        `;

        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                const title = item.querySelector('.nav-item-title').textContent.toLowerCase();
                if (title.includes(searchTerm)) {
                    item.style.display = 'block';
                    item.style.order = '0';
                } else {
                    item.style.display = searchTerm ? 'none' : 'block';
                }
            });
        });

        document.body.appendChild(searchInput);

        // Sistema de atualização em tempo real (simulado)
        function simulateRealTimeUpdates() {
            const indicators = [
                { selector: '.stat-value', variations: ['+12', '+8', '+5', '+15', '+3'] },
            ];
            
            setInterval(() => {
                // Simular pequenas atualizações nos números
                const randomStat = document.querySelectorAll('.stat-value')[Math.floor(Math.random() * 6)];
                if (randomStat && !randomStat.textContent.includes('%') && !randomStat.textContent.includes('‰')) {
                    const currentValue = parseInt(randomStat.textContent.replace(/[^\d]/g, ''));
                    const variation = Math.floor(Math.random() * 5) + 1;
                    const newValue = currentValue + variation;
                    
                    // Animação de atualização
                    randomStat.style.transition = 'all 0.3s ease';
                    randomStat.style.transform = 'scale(1.1)';
                    randomStat.style.color = '#10b981';
                    
                    setTimeout(() => {
                        randomStat.textContent = newValue.toLocaleString();
                        setTimeout(() => {
                            randomStat.style.transform = 'scale(1)';
                            randomStat.style.color = '#60a5fa';
                        }, 300);
                    }, 150);
                }
            }, 30000); // Atualizar a cada 30 segundos
        }

        // Iniciar simulação de atualizações
        setTimeout(simulateRealTimeUpdates, 5000);

        // Função para mostrar modal de detalhes
        function showHospitalModal(hospitalKey) {
            const data = hospitalData[hospitalKey];
            if (!data) return;

            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10001;
            `;

            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
                padding: 2rem;
                border-radius: 15px;
                border: 1px solid rgba(148, 163, 184, 0.3);
                max-width: 500px;
                width: 90%;
                color: white;
                position: relative;
            `;

            modalContent.innerHTML = `
                <button onclick="this.closest('.modal').remove()" style="
                    position: absolute;
                    top: 10px;
                    right: 15px;
                    background: none;
                    border: none;
                    color: white;
                    font-size: 1.5rem;
                    cursor: pointer;
                ">×</button>
                <h2 style="color: #60a5fa; margin-bottom: 1rem;">${data.name}</h2>
                <div style="margin: 1rem 0;">
                    <strong>📊 Volume:</strong> ${data.volume}
                </div>
                <div style="margin: 1rem 0;">
                    <strong>✅ Parto Normal:</strong> ${data.normal}
                </div>
                <div style="margin: 1rem 0;">
                    <strong>⚠️ Cesárea:</strong> ${data.cesarea}
                </div>
                <div style="margin: 1rem 0;">
                    <strong>🏥 Status:</strong> ${data.status}
                </div>
                <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(148, 163, 184, 0.3);">
                    <button onclick="window.open('${getPageUrl(hospitalKey)}', '_blank')" style="
                        background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
                        color: white;
                        border: none;
                        padding: 0.75rem 1.5rem;
                        border-radius: 8px;
                        cursor: pointer;
                        font-weight: 600;
                        width: 100%;
                    ">📊 Ver Dashboard Completo</button>
                </div>
            `;

            modal.appendChild(modalContent);
            modal.classList.add('modal');
            document.body.appendChild(modal);

            // Fechar modal clicando fora
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        function getPageUrl(hospitalKey) {
            const pageMap = {
                'mari': 'dashboard_mari.html',
                'alto_alegre': 'dashboard_alto_alegre.html',
                'coroata': 'dashboard_coroata.html',
                'timon': 'dashboard_timon.html',
                'barreirinhas': 'dashboard_barreirinhas.html',
                'santa_luzia': 'dashboard_santa_luzia_do_parua.html',
                'itapecuru': 'dashboard_itapecuru.html',
                'timbiras': 'dashboard_timbiras.html',
                'morros': 'dashboard_morros.html',
                'paulino_neves': 'dashboard_paulino_neves.html'
            };
            return pageMap[hospitalKey] || '#';
        }

        // Adicionar duplo clique para modal nos marcadores
        markers.forEach(marker => {
            marker.addEventListener('dblclick', (e) => {
                const hospitalKey = e.target.getAttribute('data-hospital');
                showHospitalModal(hospitalKey);
            });
        });

        // Adicionar indicador de conectividade
        const connectionStatus = document.createElement('div');
        connectionStatus.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        `;

        connectionStatus.innerHTML = `
            <div style="width: 8px; height: 8px; background: #34d399; border-radius: 50%; animation: pulse 2s infinite;"></div>
            Sistema Online
        `;

        document.body.appendChild(connectionStatus);

        // Sistema de notificações toast
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            const colors = {
                success: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                warning: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                error: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',
                info: 'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)'
            };

            toast.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: ${colors[type]};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                z-index: 10002;
                transform: translateX(100%);
                transition: transform 0.3s ease;
                max-width: 300px;
                word-wrap: break-word;
            `;

            toast.textContent = message;
            document.body.appendChild(toast);

            // Animar entrada
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);

            // Auto-remover
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        // Mostrar toast de boas-vindas
        setTimeout(() => {
            showToast('Sistema EMSERH carregado com sucesso! Dados atualizados.', 'success');
        }, 2000);

        // Adicionar atalhos de teclado
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'e':
                        e.preventDefault();
                        exportReport();
                        showToast('Relatório exportado com sucesso!', 'success');
                        break;
                    case 'f':
                        e.preventDefault();
                        searchInput.focus();
                        break;
                    case 'h':
                        e.preventDefault();
                        showToast('Atalhos: Ctrl+E (Exportar), Ctrl+F (Buscar), Ctrl+H (Ajuda)', 'info');
                        break;
                }
            }
        });

        // Sistema de favoritos
        let favorites = JSON.parse(localStorage.getItem('emserh_favorites') || '[]');

        function toggleFavorite(hospitalKey) {
            const index = favorites.indexOf(hospitalKey);
            if (index > -1) {
                favorites.splice(index, 1);
                showToast('Removido dos favoritos', 'info');
            } else {
                favorites.push(hospitalKey);
                showToast('Adicionado aos favoritos', 'success');
            }
            localStorage.setItem('emserh_favorites', JSON.stringify(favorites));
            updateFavoriteDisplay();
        }

        function updateFavoriteDisplay() {
            markers.forEach(marker => {
                const hospitalKey = marker.getAttribute('data-hospital');
                if (favorites.includes(hospitalKey)) {
                    marker.style.filter = 'drop-shadow(0 0 8px gold)';
                } else {
                    marker.style.filter = '';
                }
            });
        }

        // Inicializar favoritos
        updateFavoriteDisplay();

        // Adicionar contexto menu nos marcadores
        markers.forEach(marker => {
            marker.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                const hospitalKey = marker.getAttribute('data-hospital');
                
                const contextMenu = document.createElement('div');
                contextMenu.style.cssText = `
                    position: fixed;
                    top: ${e.clientY}px;
                    left: ${e.clientX}px;
                    background: rgba(15, 23, 42, 0.95);
                    border: 1px solid rgba(148, 163, 184, 0.3);
                    border-radius: 8px;
                    padding: 0.5rem 0;
                    z-index: 10003;
                    backdrop-filter: blur(10px);
                `;

                const isFavorite = favorites.includes(hospitalKey);
                contextMenu.innerHTML = `
                    <div onclick="window.open('${getPageUrl(hospitalKey)}', '_blank')" style="
                        padding: 0.5rem 1rem;
                        cursor: pointer;
                        color: white;
                        font-size: 0.9rem;
                    " onmouseover="this.style.background='rgba(59, 130, 246, 0.2)'" onmouseout="this.style.background='transparent'">
                        📊 Abrir Dashboard
                    </div>
                    <div onclick="toggleFavorite('${hospitalKey}'); this.parentElement.remove();" style="
                        padding: 0.5rem 1rem;
                        cursor: pointer;
                        color: white;
                        font-size: 0.9rem;
                    " onmouseover="this.style.background='rgba(59, 130, 246, 0.2)'" onmouseout="this.style.background='transparent'">
                        ${isFavorite ? '⭐ Remover dos Favoritos' : '☆ Adicionar aos Favoritos'}
                    </div>
                    <div onclick="showHospitalModal('${hospitalKey}'); this.parentElement.remove();" style="
                        padding: 0.5rem 1rem;
                        cursor: pointer;
                        color: white;
                        font-size: 0.9rem;
                    " onmouseover="this.style.background='rgba(59, 130, 246, 0.2)'" onmouseout="this.style.background='transparent'">
                        ℹ️ Ver Detalhes
                    </div>
                `;

                document.body.appendChild(contextMenu);

                // Remover menu ao clicar fora
                setTimeout(() => {
                    document.addEventListener('click', function removeMenu() {
                        contextMenu.remove();
                        document.removeEventListener('click', removeMenu);
                    });
                }, 100);
            });
        });

        console.log('🏥 Sistema EMSERH - Dashboard Principal Carregado');
        console.log('📊 Total de unidades monitoradas: 10');
        console.log('🎯 Sistema de monitoramento materno-infantil ativo');
    </script>
</body>
</html>